{% extends "base.html" %}

<!-- <script>
	$(function() {
		$('#download-file-btn').click(function() {
			$.ajax({
				type: 'POST',
				url: '/download',
				data: JSON.stringify(dnamelist),
				// data: form_data,
				contentType: false,
				cache: false,
				processData: false,
				async: false,
				// url: "/download",
				contentType: 'application/json',
				success: function(data) {
					console.log('Success!');
					console.log(data);
				},
				error: function(error) {
					console.log("Failure!");
					console.log(error);
				}
		});
	}
</script> -->

{% block app_content %}

<head>
	<link rel="stylesheet" type="text/css"
      href="{{url_for('static', filename='slick/slick/slick.css')}}"/>
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='slick/slick/slick-theme.css')}}"/>
    <style>
    	.slick-prev:before, .slick-next:before {
    		color: black !important;
    	}
	</style>
</head>

<body>
	
	<!-- input file name  -->
	{{ filename }}
	{{ dnames | safe }}

	<div class="dfs">
		{% for dataframe, dname in tables %}
		      <div>
		      	{{ dname | safe }}
		      	{{ dataframe | safe }}
		      </div>
		{% endfor %}
	</div>

	<form id="download-form" action="{{ url_for('download') }}" method="post">
		<input type="hidden" id="filename" name="filename" value="{{ dnames | safe }}">
		<input type="submit" class="custom-button" value="Download as CSV">
	</form>

	{% block scripts %}
		{{ super() }}
		<script type="text/javascript" src="{{url_for('static', filename='slick/slick/slick.min.js')}}"></script>

		<script type="text/javascript">
			function initializeSlider() {
				$('.dfs').not('.slick-initialized').slick({
					dots: true,
					infinite: true,
					speed: 350,
					arrows: true, 
					slidesToShow: 1,
					adaptiveHeight: true
				});
			}

			initializeSlider();

			$(window).on( 'resize', initializeSlider );
		</script>
	{% endblock %}

</body>

{% endblock %}
